<!DOCTYPE html>
<html>
<head>
  <title>Learn to Draw</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; text-align: center; }
    select, button { padding: 8px; font-size: 16px; }
    .step { margin: 20px 0; }
    img { max-width: 300px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h2>Learn How to Draw!</h2>

  <label for="drawingSelect">Choose something to draw:</label><br><br>
  <select id="drawingSelect"></select>
  <button onclick="loadSteps()">Generate Steps</button>

  <div id="stepsContainer"></div>

  <script>
    const API_BASE = "http://localhost:8080/api";

    // Load dropdown options
    fetch(`${API_BASE}/drawings/names`)
      .then(res => res.json())
      .then(names => {
        const select = document.getElementById("drawingSelect");
        names.forEach(name => {
          const opt = document.createElement("option");
          opt.value = name;
          opt.textContent = name.charAt(0).toUpperCase() + name.slice(1);
          select.appendChild(opt);
        });
      });

    // Fetch steps and show them
    function loadSteps() {
      const selected = document.getElementById("drawingSelect").value;
      if (!selected) return;

      fetch(`${API_BASE}/drawings/${selected}/steps`)
        .then(res => res.json())
        .then(steps => {
          const container = document.getElementById("stepsContainer");
          container.innerHTML = "";

          steps.forEach(step => {
            const div = document.createElement("div");
            div.className = "step";
            div.innerHTML = `
              <h3>Step ${step.stepNumber}</h3>
              <p>${step.description}</p>
              <img src="${step.imagePath}" alt="Step ${step.stepNumber}">
            `;
            container.appendChild(div);
          });
        });
    }
  </script>
</body>
</html>
